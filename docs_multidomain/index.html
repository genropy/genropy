<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genropy Multidomain Workspace - Documentazione</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
</head>
<body>
    <nav class="sidebar">
        <div class="logo">
            <h2>Genropy</h2>
            <span class="subtitle">Multidomain Workspace</span>
        </div>
        <ul class="nav-menu">
            <li><a href="index.html" class="active">Overview</a></li>
            <li><a href="architecture.html">Architettura</a></li>
            <li><a href="request-flow.html">Flusso Richieste</a></li>
            <li><a href="isolation.html">Meccanismi Isolamento</a></li>
            <li><a href="onboarding.html">Onboarding Workspace</a></li>
            <li><a href="configuration.html">Configurazione</a></li>
            <li><a href="neon-integration.html">Neon DB Integration</a></li>
            <li><a href="best-practices.html">Best Practices</a></li>
            <li><a href="issues-future.html">Problemi & Roadmap</a></li>
        </ul>
        <div class="sidebar-footer">
            <p>Branch: <code>feature/multidomain-workspace</code></p>
            <p>Base: <code>feature/refactor-dbstores-storetable</code></p>
        </div>
    </nav>

    <main class="content">
        <header>
            <h1>Genropy Multidomain Workspace</h1>
            <p class="tagline">Un'unica istanza applicativa per servire N clienti completamente isolati</p>
        </header>

        <section class="hero">
            <div class="hero-content">
                <h2>Trasforma la tua applicazione in una piattaforma SaaS multi-tenant</h2>
                <p>Il sistema Multidomain Workspace permette di servire centinaia di clienti indipendenti da un'unica istanza, con isolamento completo di utenti, sessioni, dati e preferenze.</p>
            </div>
            <div class="stats">
                <div class="stat-card">
                    <span class="stat-number">-87%</span>
                    <span class="stat-label">Riduzione costi</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">2-5 min</span>
                    <span class="stat-label">Onboarding clienti</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">âˆ</span>
                    <span class="stat-label">ScalabilitÃ  workspace</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">100%</span>
                    <span class="stat-label">Isolamento dati</span>
                </div>
            </div>
        </section>

        <section class="key-features">
            <h2>Caratteristiche Principali</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">ğŸ”’</div>
                    <h3>Isolamento Completo</h3>
                    <p>Ogni workspace ha utenti, sessioni, database, preferenze e servizi completamente separati</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">âš¡</div>
                    <h3>Autoscaling Database</h3>
                    <p>Integrazione con Neon DB: i database inattivi si sospendono automaticamente, risveglio istantaneo</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸš€</div>
                    <h3>Onboarding Rapido</h3>
                    <p>Nuovo cliente pronto in 2-5 minuti: crea workspace, inizializza dati, cliente operativo</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸ“±</div>
                    <h3>App Mobile Unificata</h3>
                    <p>Un'unica app sugli store (iOS/Android) per tutti i workspace con selezione al login</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸ”§</div>
                    <h3>Thread-Safe</h3>
                    <p>Supporto nativo multiprocesso + multithread (Gunicorn) senza contaminazione tra richieste</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸ’°</div>
                    <h3>Cost-Effective</h3>
                    <p>Da $1200/cliente/anno a $150/cliente/anno con autoscaling pay-per-use</p>
                </div>
            </div>
        </section>

        <section class="concept">
            <h2>Concetto Chiave</h2>
            <div class="concept-diagram">
                <div class="before-after">
                    <div class="scenario">
                        <h3>âŒ Prima (Istanze Separate)</h3>
                        <pre><code>cinema_emotion.teamset.io  â†’ Instance A â†’ DB A â†’ Server A
sky_movies.teamset.io      â†’ Instance B â†’ DB B â†’ Server B
wolves_prod.teamset.io     â†’ Instance C â†’ DB C â†’ Server C

Costi: 3 server Ã— $1200/anno = $3600/anno
Manutenzione: 3 aggiornamenti, 3 deploy, 3 backup</code></pre>
                    </div>
                    <div class="scenario">
                        <h3>âœ… Dopo (Multidomain)</h3>
                        <pre><code>app.teamset.io/_main_/          â†’ Admin interface
app.teamset.io/cinema_emotion/  â†’ Cliente A
app.teamset.io/sky_movies/      â†’ Cliente B
app.teamset.io/wolves_prod/     â†’ Cliente C

Costi: 1 server + Neon DB = ~$700/anno
Manutenzione: 1 aggiornamento, 1 deploy, backup automatico</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <section class="url-structure">
            <h2>Struttura URL</h2>
            <div class="url-examples">
                <div class="url-item">
                    <code class="url">https://app.teamset.io/</code>
                    <span class="url-desc">â†’ Pagina documentazione/vendita (gestita esternamente via nginx)</span>
                </div>
                <div class="url-item">
                    <code class="url">https://app.teamset.io/_main_/</code>
                    <span class="url-desc">â†’ Configuratore con utenze rivenditore (admin workspace)</span>
                </div>
                <div class="url-item">
                    <code class="url">https://app.teamset.io/cinema_emotion/</code>
                    <span class="url-desc">â†’ Workspace Cliente A (utenti, dati, preferenze isolati)</span>
                </div>
                <div class="url-item">
                    <code class="url">https://app.teamset.io/sky_movies/</code>
                    <span class="url-desc">â†’ Workspace Cliente B (completamente separato)</span>
                </div>
            </div>
        </section>

        <section class="architecture-preview">
            <h2>Architettura a Livelli</h2>
            <div class="architecture-stack">
                <div class="layer">
                    <span class="layer-name">Client</span>
                    <span class="layer-tech">Browser + Cookie isolation (Path-based)</span>
                </div>
                <div class="layer">
                    <span class="layer-name">Proxy</span>
                    <span class="layer-tech">Nginx â†’ Gunicorn (multiprocesso + multithread)</span>
                </div>
                <div class="layer">
                    <span class="layer-name">WSGI Site</span>
                    <span class="layer-tech">Domain extraction, Thread-local context, Register per-domain</span>
                </div>
                <div class="layer">
                    <span class="layer-name">Page</span>
                    <span class="layer-tech">Domain-scoped connection, DB environment setup</span>
                </div>
                <div class="layer">
                    <span class="layer-name">Database</span>
                    <span class="layer-tech">Thread-local connection pool, Store-specific queries</span>
                </div>
                <div class="layer">
                    <span class="layer-name">Neon DB</span>
                    <span class="layer-tech">PostgreSQL autoscaling, Database per workspace</span>
                </div>
            </div>
            <a href="architecture.html" class="btn-primary">Vedi Architettura Dettagliata â†’</a>
        </section>

        <section class="quick-start">
            <h2>Quick Start</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Abilita Multidomain</h3>
                        <pre><code class="language-xml">&lt;gnrcore_multidb pkgcode="gnrcore:multidb"
                 storetable='ts_hosting.workspace'
                 multidomain='t'
                 prefix=''/&gt;</code></pre>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Crea Storetable Custom</h3>
                        <pre><code class="language-python">class Table(StoreTable):
    def config_db(self, pkg):
        tbl = pkg.table('workspace', ...)
        tbl.column('dbstore', size=':30', unique=True)
        tbl.column('denominazione', size=':40')</code></pre>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Crea Workspace</h3>
                        <p>Interfaccia admin: Inserisci record â†’ Attiva dbstore â†’ Inizializza dati</p>
                        <p>Cliente pronto in 2-5 minuti!</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="use-cases">
            <h2>Casi d'Uso</h2>
            <div class="use-case-grid">
                <div class="use-case">
                    <h3>ğŸ¥ Healthcare SaaS</h3>
                    <p>Cliniche separate con compliance HIPAA, dati pazienti completamente isolati</p>
                </div>
                <div class="use-case">
                    <h3>ğŸ¬ Media Production</h3>
                    <p>Case di produzione indipendenti (teamset.io), budget e planning separati</p>
                </div>
                <div class="use-case">
                    <h3>ğŸ¢ Multi-brand</h3>
                    <p>E-commerce multi-brand, cataloghi e checkout indipendenti</p>
                </div>
                <div class="use-case">
                    <h3>ğŸ˜ï¸ Property Management</h3>
                    <p>Gestione condomini, ogni condominio workspace separato</p>
                </div>
            </div>
        </section>

        <section class="navigation-cards">
            <h2>Esplora la Documentazione</h2>
            <div class="cards-grid">
                <a href="architecture.html" class="nav-card">
                    <h3>ğŸ—ï¸ Architettura</h3>
                    <p>Schema dettagliato dei componenti e delle interazioni</p>
                </a>
                <a href="request-flow.html" class="nav-card">
                    <h3>ğŸ”„ Flusso Richieste</h3>
                    <p>Da HTTP Request a Database Query, step-by-step</p>
                </a>
                <a href="isolation.html" class="nav-card">
                    <h3>ğŸ”’ Isolamento</h3>
                    <p>6 meccanismi di isolamento spiegati in dettaglio</p>
                </a>
                <a href="onboarding.html" class="nav-card">
                    <h3>ğŸš€ Onboarding</h3>
                    <p>Come creare e inizializzare nuovi workspace</p>
                </a>
                <a href="configuration.html" class="nav-card">
                    <h3>âš™ï¸ Configurazione</h3>
                    <p>Setup instanceconfig.xml e storetable</p>
                </a>
                <a href="best-practices.html" class="nav-card">
                    <h3>ğŸ“ Best Practices</h3>
                    <p>Pattern consigliati e anti-pattern da evitare</p>
                </a>
            </div>
        </section>

        <footer>
            <p>Genropy Multidomain Workspace - Branch: <code>feature/multidomain-workspace</code></p>
            <p>Basato su: <code>feature/refactor-dbstores-storetable</code> â†’ <code>develop</code></p>
        </footer>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="assets/script.js"></script>
</body>
</html>
